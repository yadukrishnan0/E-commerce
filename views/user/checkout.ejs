<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Account</title>
    <!-- <link rel="shortcut icon" href="#" type="image/x-icon" /> -->
    <!-- Bootstrap css cdn link -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <!-- end of Bootstrap css cdn link -->
    <!-- Style css -->
    <link rel="stylesheet" href="/userCss/checkout.css" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <!-- end of Style css -->
  </head>
  <body>
    <!-- header -->
    <header>
      <div class="container-fluid">
        <div class="row header">
          <div class="col-6 topheader topheaderone">
            <div class="topheadingimg topheadingimgone">
              <img
                src="./images/header/shipping-icon.svg"
                alt="shipping-icon"
              />
              <p>Free Shipping</p>
            </div>
          </div>
          <div class="col-6 topheader topheadertwo">
            <div class="topheadingimg topheadingimgtwo">
              <img
                src="./images/header/warranty-icon.svg"
                alt="warranty-icon"
              />
              <p>1 Year Warranty</p>
            </div>
          </div>
        </div>
      </div>

      <nav>
        <div class="container-fluid">
          <div class="row navigation">
            <div
              class="col-12 d-flex align-items-center justify-content-between"
            >
              <div class="logo d-flex align-items-center m-0 p-0">
                <div class="mobilenavigation">
                  <button class="hamburger">
                    <span class="d-block mt-0"></span>
                    <span class="d-block"></span>
                    <span class="d-block mb-0"></span>
                  </button>
                </div>

              </div>

              <div class="navigationnavbar">
                <ul class="d-flex list-unstyled m-0 p-0 align-items-center">
                  <li>
                    <a href="/home"> Home </a>
                  </li>
                  <li>
                    <a href="/catagory?id=Men"> Men </a>
                  </li>
                  <li>
                    <a href="/catagory?id=Women">Women</a>
                  </li>
                  <li>
                    <a href="/catagory?id=Electronics"> Electronics</a>
                  </li>
                    <li>
                    <a href="/allproducts"> Shop By Category </a>
                  </li>
                </ul>
              </div>

              <div class="mobilenavigationList">
                <h2>Shop By Category</h2>
                <ul class="m-0 list-unstyled">
                  <li>
                    <a href="/home"> Home </a>
                  </li>
                  <li>
                    <a href="/catagory?id=Men"> Men </a>
                  </li>
                  <li>
                    <a href="/catagory?id=Women">Women</a>
                  </li>
                  <li>
                    <a href="/catagory?id=Electronics"> Electronics</a>
                  </li>
                    <li>
                    <a href="/allproducts"> Shop By Category </a>
                  </li>
                </ul>
              </div>

              <div class="useroptions d-flex">
                <ul class="m-0 p-0 d-flex align-items-center list-unstyled">
                  
                  <li>
                    <a href="/userAccont">
                        <i class="fa-solid fa-user" style="color: black;"></i>
                    </a>                                   
                </li>
                <li>
                    <a href="/userOrders">
                        <i class="fa-solid fa-bag-shopping" style="color: black;"></i>
                    </a>                                    
                </li>
                <li>
                    <a href="/wishlist">
                        <i class="fa-solid fa-heart" style="color: black;"></i>
                    </a>
                </li>
                <li>
                    <a href="/cart">
                        <i class="fa-solid fa-cart-shopping" style="color: black;"></i>
                    </a>
                </li>

                </ul>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <!-- end of header -->

    <!-- main -->
    <main>
      <!-- Modal -->
      <div
        class="modal fade"
        id="changeAddressModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content bg-white eachAdd border-0">
            <div class="modal-header">
              <h5
                class="modal-title"
                id="exampleModalLabel"
              >
                Address
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>

            <div class="modal-body">
             <%if(useraddress&&useraddress.addresses.length>0) {%>
<% useraddress.addresses.forEach(data=>{ %>


              <div class="chooseAdd existingAddress p-3 w-100 mb-3 position-relative">
                <!-- <p class="name"></p> -->
                <!-- <p><%= data.address %></p> -->
                <p class="phone"><%= data.address %></p>
                <p><%=data.city%></p>
                <p><%=data.district%></p>
                <p><%=data.state%></p>
                <p><%=data.postcode%></p>
                <input name="adId" class="position-absolute radio" type="radio" value="<%= JSON.stringify(data) %>">
              </div>
    <%})%>
<%}%>
              


              
              
              <!-- <p class="m-0"><a href="/" class="button">Add Address</a></p> -->
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary bg-danger text-white"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <!-- Add additional buttons or actions as needed -->
            </div>
          </div>
        </div>
      </div>
      <!-- end of Modal -->
      <div class="container-fluid main">
        <div class="row mainContainer">
          <div class="col-12">
            <div class="cartBody d-flex">
              <div class="col-6 oneSection">
                <div class="cartItems">
                  <div class="items position-relative mb-3">
                    <form class="payment-method" >

                    <div class="d-flex payOptions align-items-center gap-3">
                      
                      <input
                        class="pay payMethod"
                        name="payMethode"
                        value="razorpay"
                        type="radio"
                        id="creditCard"
                      />
                      <h2 class="m-0">Razorpay</h2>
                    </div>

                    <!-- <div class="credit">
                      <label for="cCNo" class="d-block"
                        >Credit card number</label
                      >
                      <input type="number" name="cCNo" />
                      <div class="d-flex gap-3 w-100">
                        <div class="w-50">
                          <label for="expiry" class="d-block"
                            >Expiry (MM/YY)</label
                          >
                          <input type="text" class="w-100" name="expiry" />
                        </div>
                        <div class="w-50">
                          <label for="CVV" class="d-block">CVV</label>
                          <input type="number" class="w-100" name="CVV" />
                        </div>
                      </div>
                      <label for="nOC" class="d-block">Name on the card</label>
                      <input type="number" name="nOC" />
                    </div> -->
                  </div>

                  <div class="items position-relative mb-3">
                    <div class="d-flex payOptions align-items-center gap-3">
                     
                      <input
                        class="pay payMethod"
                        name="payMethode"
                        value="COD"
                        type="radio"
                        id="COD"
                        />
                    </form>
                      <h2 class="m-0">Cash On Delivery (COD)</h2>
                    </div>
                  </div>

                  <div class="orderSummary m-0 w-100">
                    <div class="orderHeading">
                      <h2>Delivery Address</h2>
                    </div>
                    <div class="deleviryContent">
                      <div class="chooseAdd position-relative">
                      
                        <div class="existingAddress">
                          <%if(useraddress&&useraddress.addresses.length>0) {%>
                          <p class="name paymentaddress"><%= useraddress.addresses[0].address%>,
                            <%=useraddress.addresses[0].city%>,
                            <%=useraddress.addresses[0].district%>,
                            <%=useraddress.addresses[0].state%>,
                            <%=useraddress.addresses[0].postcode%>
                            </p>
                            <%}else{%>
                            <p>please go to your profile and add the address</p>
                            <%}%>
                            <!-- <p></p> -->
                        </div>
                       
                        <a
                          href="/userChangeAddress"
                          data-bs-toggle="modal"
                          data-bs-target="#changeAddressModal"
                        >
                          <button class="position-absolute button">
                            Change
                          </button>
                        </a>
                      </div>
                    </div>


                    
                      </div>
                      <div class="coupons">


                        <form
                          
                          class="d-flex align-items-center"
                          
                        >
                          <div class="input">
                            <input type="text" placeholder="Enter Coupon Code" class="couponName" name="couponCode" />
                          </div>
                          <div>
                            <button type="button" onclick="applyCoupon(event,'<%=totalAmt%>')">APPLY</button>
                          </div>
                        </form>
         
                  </div>
                 <% if(Coupon.length>0){%>

              
                  <p>Available coupon</p>
                 <% Coupon.forEach(data=>{ %>

                
                  <div style="width:200px;height:25px;background-color:white;border-radius:20px;border:1px solid black;display: flex;align-items: center;justify-content: center;">
                    <p><b><%=data.couponCode%></b></p>
                  </div>
                  <%})%>
                  <%}%>
                </div>
              </div>
              <div class="col-6 oneSection">
                <div class="orderSummary">
                  <div class="orderHeading">
                    <h2>order summary</h2>
                  </div>
                  <div class="orderContent">
                    <div
                      class="sTotal d-flex justify-content-between align-items-center"
                    >
                      <p class="commonText m-0 p-0">Subtotal</p>
                      <p class="commonSub m-0 p-0" id="sTotal">₹<%=totalAmt%></p>
                    </div>

                    <div
                      class="ship d-flex justify-content-between align-items-center"
                    >
                      <p class="commonText m-0 p-0">Shipping</p>
                      <p class="commonSub m-0 p-0" id="free">FREE</p>
                    </div>

                    <div
                      class="ship d-flex justify-content-between align-items-center"
                    >
                      
                    </div>

                    <div
                      class="ship d-flex justify-content-between align-items-center"
                    >
                      <p class="commonText m-0 p-0">Coupon Discount</p>
                      <p class="commonSub m-0 p-0" id="cDPrice">0%</p>
                    </div>
                  </div>
                  <div
                    class="commonText tPrice d-flex justify-content-between align-items-center"
                  >
                    <p class="m-0 p-0">Total</p>
                    <p class="m-0 p-0" id="tPrice">₹<%=totalAmt%></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <div class="checkOut">
              <p id="error"></p>
              
              <form>
                
                <button class="proceedPayment" onclick="payment(event,'<%=totalAmt%>')">Proceed to payment</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- end of main -->

    <!-- footer -->
    <%- include('../partials/footer.ejs') %>
    <!-- end of footer -->

    <!-- custom js -->
    <script src="/js/checkout.js"></script>
    <!-- end of custom js -->
    <!-- fontawesome -->
    <script
      src="https://kit.fontawesome.com/23d1247997.js"
      crossorigin="anonymous"
    ></script>
    <!-- end of fontawesome -->
    <!-- Bootstrap script file -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <!--end of Bootstrap script file -->
  </body>
</html>
